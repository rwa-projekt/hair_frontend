(this["webpackJsonprwa-projekt"]=this["webpackJsonprwa-projekt"]||[]).push([[13],{357:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(12),r=a(10),i=a(0),o=a(344),s=a(461),c=a(470),l=a(317),u=a(372),d=a.n(u),j=a(371),b=a.n(j),p=a(1);function h(e){var t=e.name,a=e.control,u=e.label,j=e.type,h=void 0===j?"text":j,m=e.textFieldProps,f=Object(i.useState)(!1),x=Object(r.a)(f,2),O=x[0],g=x[1];function v(){g((function(e){return!e}))}function w(e){e.preventDefault()}return Object(p.jsx)(o.a,{name:t,control:a,render:function(e){var t=e.field,a=t.onChange,r=t.value,i=e.fieldState.error;e.formState;return Object(p.jsx)(s.a,Object(n.a)({helperText:i?i.message:null,error:!!i,onChange:a,value:r,fullWidth:!0,label:u,variant:"outlined",type:O?"text":h,InputProps:{endAdornment:"password"===h&&Object(p.jsx)(c.a,{position:"end",children:Object(p.jsx)(l.a,{"aria-label":"Toggle password visibility",onClick:v,onMouseDown:w,edge:"end",children:O?Object(p.jsx)(b.a,{}):Object(p.jsx)(d.a,{})})})}},m))}})}},358:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n={required:{value:!0,message:"This field is required"},email:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid e-mail address."}},r={login_error:"Dogodila se gre\u0161ka prilikom prijave",register_error:"Dogodila se gre\u0161ka prilikom stvaranja ra\u010duna"}},457:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a(21),r=a.n(n),i=a(12),o=a(64),s=a(10),c=a(0),l=a(17),u=a(50),d=a(27),j=a(288),b=a(316),p=a(121),h=a(289),m=a(330),f=a(310),x=a(466),O=a(463),g=a(465),v=a(373),w=a.n(v),k=a(357),S=a(344),y=a(358),C=a(1);function q(){var e=Object(u.e)(),t=Object(l.f)(),a=Object(l.e)(),n=Object(d.c)((function(e){return e.USER.user})),v=Object(c.useState)(e.isAuthenticated&&e.isAdmin&&"#prompt"===a.hash),q=Object(s.a)(v,2),A=q[0],D=q[1],I=Object(c.useState)(!1),P=Object(s.a)(I,2),T=P[0],_=P[1],V=Object(c.useState)({email:localStorage.getItem("bb:last-email"),password:""}),W=Object(s.a)(V,1)[0],M=Object(S.b)({defaultValues:W,mode:"onChange"}),Z=M.handleSubmit,B=M.register,E=M.control,F=M.formState;M.getValues;function J(){_(!1)}function U(){_(!0)}function z(){return(z=Object(o.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("/dashboard",{replace:!0}),e.next=3,localStorage.setItem("bb:last-email",a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,localStorage.setItem("bb:last-email",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){"app"===e?t("/dashboard"):"admin"===e&&t("/admin/dashboard")}return Object(C.jsx)(C.Fragment,{children:A?Object(C.jsxs)(j.a,{direction:"row",spacing:4,children:[Object(C.jsx)(f.a,{onClick:function(){return L("app")},children:"App"}),Object(C.jsx)(f.a,{onClick:function(){return L("admin")},children:"Admin panel"})]}):Object(C.jsxs)(j.a,{spacing:6,sx:{maxWidth:480,width:"100%"},children:[Object(C.jsxs)(b.a,{children:[Object(C.jsx)(p.a,{variant:"h4",sx:{mb:1},children:"Dobrodo\u0161li u Barber Booking"}),Object(C.jsx)(p.a,{variant:"subtitle2",sx:{opacity:.8,fontWeight:400},children:"Prijavite se da bi nastavili"})]}),Object(C.jsxs)(j.a,{sx:{width:"100%"},spacing:4,children:[Object(C.jsx)(k.a,Object(i.a)({name:"email",required:!0,control:E,label:"E-mail adresa",inputMode:"email",type:"email"},B("email",{required:y.a.required,pattern:y.a.email}))),Object(C.jsx)(k.a,Object(i.a)({name:"password",required:!0,control:E,label:"Lozinka",type:"password"},B("password",{required:y.a.required})))]}),Object(C.jsxs)(h.a,{children:["Nemate ra\u010dun?",Object(C.jsx)(m.a,{onClick:function(){t("/auth/register")},sx:{ml:1,cursor:"pointer"},children:"Stvorite ga"})]}),"loading"===n.status?Object(C.jsx)(g.a,{loading:!0,loadingPosition:"start",startIcon:Object(C.jsx)(w.a,{}),variant:"outlined",sx:{height:54,textTransform:"none"},children:"Prijavljivanje..."}):Object(C.jsx)(f.a,{onClick:Z((function(t){console.log(t),e.login(t,(function(){return function(e){return z.apply(this,arguments)}(t.email)}),(function(){return function(e){return H.apply(this,arguments)}(t.email)}),U)})),sx:{height:54,textTransform:"none"},variant:"contained",fullWidth:!0,inputMode:"submit",disabled:!F.isValid,children:F.isValid?"Prijava":"Unesite podatke"}),Object(C.jsx)(x.a,{open:T,autoHideDuration:3e3,onClose:J,message:y.b.login_error,children:Object(C.jsx)(O.a,{onClose:J,severity:"error",sx:{width:"100%"},children:y.b.login_error})})]})})}}}]);
//# sourceMappingURL=13.d78710ad.chunk.js.map